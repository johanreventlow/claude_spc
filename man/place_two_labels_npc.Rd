% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/utils_label_placement.R
\name{place_two_labels_npc}
\alias{place_two_labels_npc}
\title{Placer to labels ved horisontale linjer med collision avoidance}
\usage{
place_two_labels_npc(
  yA_npc,
  yB_npc,
  label_height_npc = 0.035,
  gap_line = NULL,
  gap_labels = NULL,
  pad_top = NULL,
  pad_bot = NULL,
  priority = c("A", "B")[1],
  pref_pos = c("under", "under"),
  debug = FALSE
)
}
\arguments{
\item{yA_npc}{Y-position for linje A i NPC (0-1)}

\item{yB_npc}{Y-position for linje B i NPC (0-1)}

\item{label_height_npc}{Label højde - enten:
\itemize{
\item Numerisk værdi i NPC (backward compatible)
\item List fra estimate_label_height_npc(..., return_details=TRUE) med $npc, $inches, $panel_height_inches
}}

\item{gap_line}{Min gap fra label edge til linje (default NULL = auto-beregn fra config)
\itemize{
\item Hvis label_height_npc er list: Beregnes som fast \% af absolute højde (inches)
\item Hvis label_height_npc er numerisk: Beregnes som \% af NPC (legacy)
}}

\item{gap_labels}{Min gap mellem labels (default NULL = auto-beregn fra config)}

\item{pad_top}{Top panel padding (default NULL = hent fra config)}

\item{pad_bot}{Bottom panel padding (default NULL = hent fra config)}

\item{priority}{Prioriteret label: "A" eller "B" (default "A")}

\item{pref_pos}{Foretrukne positioner: c("under"/"over", "under"/"over") (default c("under", "under"))}

\item{debug}{Returnér debug info? (default FALSE)}
}
\value{
List med:
\itemize{
\item \code{yA}: NPC position for label A center
\item \code{yB}: NPC position for label B center
\item \code{sideA}: "over" eller "under"
\item \code{sideB}: "over" eller "under"
\item \code{placement_quality}: "optimal" / "acceptable" / "suboptimal" / "degraded" / "failed"
\item \code{warnings}: Character vector med warnings
\item \code{debug_info}: (kun hvis debug=TRUE)
}
}
\description{
Core placement algoritme med multi-level collision avoidance:
\itemize{
\item NIVEAU 1: Reducer label gap (50\% → 30\% → 15\%)
\item NIVEAU 2: Flip labels til modsatte side (3 strategier)
\item NIVEAU 3: Shelf placement (sidste udvej)
}
}
\examples{
# Basic usage (backward compatible - NPC-baseret gap)
result <- place_two_labels_npc(
  yA_npc = 0.4,
  yB_npc = 0.6,
  label_height_npc = 0.13
)

# Ny API (fixed absolute gap baseret på label inches)
height_details <- estimate_label_height_npc(
  "{.8 **CL**}  \n{.24 **45\%**}",
  return_details = TRUE
)
result <- place_two_labels_npc(
  yA_npc = 0.4,
  yB_npc = 0.6,
  label_height_npc = height_details  # List med npc/inches/panel_height
)
# Gap vil nu være fast \% af label's faktiske højde

# Coincident lines (target = CL)
result <- place_two_labels_npc(
  yA_npc = 0.5,
  yB_npc = 0.5,  # Samme værdi
  label_height_npc = 0.13,
  pref_pos = c("under", "under")
)
# Result: sideA = "under", sideB = "over"
}
